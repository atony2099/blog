---
title: ssl
date: "2021-03-02T18:05:55+0800"
draft: false
categories: ["tcp/ip"]
---

[What is a TLS handshake?](https://www.cloudflare.com/learning/ssl/what-happens-in-a-tls-handshake/)

[面试官求你了，别再问我HTTPS](https://netsecurity.51cto.com/art/202004/614535.htm)

## 1. what is https

https is a extension of http, and a secure http.
![ovVxwc](https://cdn.jsdelivr.net/gh/atony2099/imgs@master/20210302/ovVxwc.jpg)


## 2. certificatin 

1. contents:
   1. The domain name that the certificate was issued for
   2. Which person, organization, or device it was issued to
   3. Which certificate authority issued it
   4. The certificate authority's digital signature
   5. Associated subdomains
   6. Issue date of the certificate
   7. Expiration date of the certificate
   8. The public key (the private key is kept secret)




### 2. tls handshake 

![HY6rqq](https://cdn.jsdelivr.net/gh/atony2099/imgs@master/20210303/HY6rqq.jpg)

![2YbjVm](https://cdn.jsdelivr.net/gh/atony2099/imgs@master/20210305/2YbjVm.jpg)

1. send  a random string, tls version,  cipher suites supported,etc;
2. send chosen chiper  suite ,  certificate
3. verify the certificate; send a pre-master key
4. decrypt the per-master key

after above; both client and server generate symmetrical secrect  from random key and pre-mater key

use (public key)asymmetric encryption to generate pre-master key

## 2. SSL/TLS

### 1. SSL vs TLS？


| Protocol      | Published   | Status                                  |
| :------------ | :---------- | :-------------------------------------- |
| SSL 1.0       | Unpublished | Unpublished                             |
| SSL 2.0       | 1995        | Deprecated in 2011 (RFC 6176)           |
| SSL 3.0       | 1996        | Deprecated in 2015 (RFC 7568)           |
| TLS 1.0       | 1999        | Deprecated in 2020 (RFC 8996)[8][9][10] |
| TLS 1.1       | 2006        | Deprecated in 2020 (RFC 8996)[8][9][10] |
| TLS 1.2       | 2008        |                                         |
| TLS 1.3  2018 |             |                                         |






### 2. what is SSL certification

used to  provide the public key;

the client must verify the certification before using it;

### 3. types of SSL certification

1. DV: domain validated: only validate  you  own the URL
2. OV: organization validated: validate
   you own the url while you own the orgation
3. EV: Extended validation: provide more information

### 4. how does the brower verify  the cerfification

![](https://i.stack.imgur.com/gBz21.gif)
the superior use the public key  to validate  the signature which generated by private key;(证书里声明的哈希算法对明文部分进行哈希和公钥解开后的签名进行比较)

#### 1. what is signature,how to verify

![QT91OZ](https://cdn.jsdelivr.net/gh/atony2099/imgs@master/20210310/QT91OZ.jpg)

generate the signature

1. use hash algorithm to generate a digest of the content;
2. use private key to encrypt the digest

verify the signature

1. hash the content: A1
2. use public key tp decrypt the signature: A2
3. compare A1 and A2;

## antoher question

### 1. why  need CA  ?

![1rCBlY](https://cdn.jsdelivr.net/gh/atony2099/imgs@master/20210305/1rCBlY.jpg)
CA(certificate authority)颁发证书和提供证书验证机制

防止中间人攻击: 中间人可以使用自己的公钥替换服务端公钥；CA提供一种安全机制确保证书是可信的；




## generate  
1. acme: automatic certificate management environment  between certificate authorities  and user's web services;;



2. free ca:
   1. let's encrypt it
   2. zero ssl